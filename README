In order for the Condor Remote Configuration feature to work a CNAME record
must be added to DNS with the name puppet.  It must be pointing to the
machine that has the condor-remote-configuration-server installed.

Client Configuration:
To configure the remote configuration feature on a condor node, install the
condor-remote-configuration package.  Next, copy the puppet.conf.client to
/etc/puppet by executing:

cp -f /usr/share/doc/condor-remote-configuration-1.0/puppet.conf.client /etc/puppet/puppet.conf

Then copy the namespaceauth.conf to /etc/puppet by executing:

cp -f /usr/share/doc/condor-remote-configuration-1.0/namespaceauth.conf /etc/puppet

Change the "allow <puppetmaster.fqdn>" entry in the namespaceauth.conf file
and the replace "<puppetmaster.fqdn>" with the Fully Qualified Doman Name of
the machine that has the condor-remote-configuration-server package installed.
There should only be one system with this package installed in a cluster.

Server Configuration:
To configure the remote configuration feature on the configuration server,
install the condor-remote-configuration-server package.  Next, copy the
puppet.conf.master to /etc/puppet by executing:

cp -f /usr/share/doc/condor-remote-configuration-server-1.0/puppet.conf.master /etc/puppet/puppet.conf

And then create the site.pp file by executing:

echo 'import "condor"' >> /etc/puppet/manifests/site.pp

Then start the service by executing:

service puppetmaster start

Usage:
To configure a condor node, the Fully Qualified Domain Name (FQDN) of the
node to be configured must be known as this is how the node will identify
itself to the configuration system.  Configuring a Condor node is as simple
as running the condor_configure_node tool as root with the appropriate action
and features:

condor_configure_node [-h|--help] -n <FQDN> action [-f|--features] feature[,feature,...]

The currently supported actions are either add, delete, or list.  The add
action is used to add features to the provided node or group of nodes, and if
any additional information is required then the tool will prompt the user.
Blank lines are valid for almost any entry.

In addition, there are a few configuration items that will be prompted for
regardless of which options are being enabled:
Schedulers
Collector Name
QMF Broker Information

If the node being configured is not a scheduler, then the configuration tool
will prompt for the list of schedulers the node should be allowed to submit to.
First it will prompt for the default scheduler, then for a comma separated
list of additional schedulers that the node should be allowed to submit to.
The valid values for these entries is either 'ha-schedd@' for a High Available
Scheduler or the FQDN of the schedulers.

The Collector Name is a human readable text field that will identify the pool.
This value will be set as condor's COLLECTOR_NAME for the node.

The QMF Broker is the AMQP broker that is used to communicate with the
Management console.  The configuration tool will prompt for the IP/hostname
where the broker is running, as well as the port the broker is listening on.
If no port is provided, the default port will be used.

The delete action works similarly to the add action, and will prompt to change
the Schedulers, Collector Name, or QMF Broker information.  Entering 'n' or
not answering the questions will leave that configuration unchanged.

Finally, the configuration tool will prompt to save the configuration.  If the
configuration is saved, the tool will automatically trigger all known nodes
to report in to check their configuration.

The list of supported features and usage information can be obtained by
executing:

condor_configure_node --help

When configuring concurrency limits on HA Central Managers, the same
limits should be configured on all HA Central Managers.


Examples:
To enable a machine named condor_ca.domain.com to be a High Available Central
Manager:
condor_configure_node -n condor_ca.domain.com -a ha_central_manager

To enable a machine name twofer.domain.com to be a Scheduler and an Execute
node:
condor_configure_node -n twofer.domain.com -a scheduler,startd

To remove the Execution functionality from twofer.domain.com:
condor_configure_node -n twofer.domain.com -d startd
